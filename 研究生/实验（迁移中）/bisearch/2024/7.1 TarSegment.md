## Readme

7.1 实现了method25 BiSearchTar+Segment,期望（块大小）倒是实现了，overall效果为18.97，比odess+cdc好，但不如odess+tar。下降了挺多其实

7.2 猜测有可能是D之间总会隔着个H导致的，于是H和D分开编号，实现了双轨制度method26，plchunk chunkset logicalid dedupgap都分别各用一套。统计的逻辑总大小，和odess+fastcdc是一样的，在做restore之前初步认为没问题吧。分块、逻辑大小都是和单轨没变化的，正常，但overall比起单轨还要drop。。尝试寻找是否有哪些变量两轨混用了才导致了bug，（但delta等数据都是很正常的）。

才外，还发现了上周的TarHeader逻辑大小对不上的问题

7.3 用老版本的restore+seg1B完成了md5sum检验，虽然不知道为什么和原本tar不是完全相同

7.4 完成了seg16KB版本的restore，对seg16KB的结果restoreSeg，最后经过md5sum检验合格。但是，恢复约20个backup时会爆内存，服务器能ping通但是ssh不了，再过两小时后服务器会kill掉这个进程并重启服务器

  

Linux node1 /home/cluster/WZY/Bi/commit44/BiSearch seg_linux

Cassandra node2 /home/cluster/WZY/Bi/commit44/BiSearch seg_cass

Web server3

## BiSearchTar+Segment 单轨 headerSegment和dataSegment在一起编号

```SQL
./BiSearch -i /mnt/dataset2/LKT/ -m 25 -r 8 -n 84 -f 4
-----------------CHUNK NUM-----------------------
logical chunk num: 2682355
unique chunk num: 1955863
base chunk num: 259891
delta chunk num: 1695972
finesse hit:387789
fit same count: 0
-----------------CHUNK SIZE-----------------------
Overall Compression Ratio: 18.9686
logical chunk size: 48257720320
unique chunk size: 2544090871
dedup chunk size: 0
base chunk size: 1568818256
delta chunk size: 975272615
finesse chunk size: 345723444
finesse pre chunk size: 8110886722
local chunk size: 619182704
local pre chunk size: 13020315456
--------------------------------------------------
```

## BiSearchTar+SegmentDual 双轨，headerSegment和dataSegment分别编号

```SQL
./BiSearch -i /mnt/dataset2/LKT/ -m 26 -r 8 -n 84 -f 4
-----------------CHUNK NUM-----------------------
logical chunk num: 2682355
unique chunk num: 1955863
base chunk num: 394026
delta chunk num: 1561837
finesse hit:461675
fit same count: 0
-----------------CHUNK SIZE-----------------------
Overall Compression Ratio: 18.4164
logical chunk size: 48257720320
unique chunk size: 2620372906
dedup chunk size: 0
base chunk size: 1542057841
delta chunk size: 1078315065
finesse chunk size: 367334536
finesse pre chunk size: 6223328582
local chunk size: 689143138
local pre chunk size: 14745986899
--------------------------------------------------
```

## BiSearch-Tar-Header

```SQL
./BiSearch -i /mnt/dataset2/LKT -m 23 -r 8 -n 84 -f 4
-----------------CHUNK NUM-----------------------
logical chunk num: 3977588
unique chunk num: 1101749
base chunk num: 222026
delta chunk num: 879723
finesse hit:347195
fit same count: 0
-----------------CHUNK SIZE-----------------------
Overall Compression Ratio: 24.2359
logical chunk size: 48257593344
unique chunk size: 1991165287
dedup chunk size: 0
base chunk size: 1195302277
delta chunk size: 795863010
finesse chunk size: 243527746
finesse pre chunk size: 6611379200
local chunk size: 547506495
local pre chunk size: 10845171712
--------------------------------------------------
```

## Odess+FastCDC

```SQL
DedupReductSize is 20972217864
DeltaReductSize is 21126480290
LocalReductSize is 2827132775
ReductSum is 44925830929
process last container
Time taken by for loop: 15.9096 minutes
-----------------CHUNK NUM-----------------------
logical chunk num: 5677362
unique chunk num: 3015571
base chunk num: 627003
delta chunk num: 2388568
finesse hit:0
fake data:0
-----------------CHUNK SIZE-----------------------
Overall Compression Ratio: 14.4836
logical chunk size: 48257720320
unique chunk size: 3331889391
dedup chunk size: 0
base chunk size: 2411961402
delta chunk size: 919927989
finesse chunk size: 0
finesse pre chunk size: 0
local chunk size: 0
local pre chunk size: 0
Compute SF times:0
Sum Time5: 0 seconds
Fetch Base Chunk Time: 0 seconds
load container times: 115382
cache hit times: 2270196
Read IO time: 204 seconds
Write IO time: 2 seconds
Update Cache time: 25seconds
Read Cache time: 171seconds
```

## BiSeachTar原版

```SQL
same count is 976546
DedupReductSize is 27967163392
DeltaReductSize is 16073173712
LocalReductSize is 1975245255
ReductSum is 46015582359
process last container
Time taken by for loop: 30.8506 minutes
./BiSearch -i /mnt/dataset2/LKT/ -m 17 -r 8 -n 84 -f 4
-----------------CHUNK NUM-----------------------
logical chunk num: 10626764
unique chunk num: 5203159
base chunk num: 1243616
delta chunk num: 3959543
finesse hit:2510475
fake data:0
-----------------CHUNK SIZE-----------------------
Overall Compression Ratio: 21.5231
logical chunk size: 48257720320
unique chunk size: 2242137961
dedup chunk size: 0
base chunk size: 1422690361
delta chunk size: 819447600
finesse chunk size: 519179268
finesse pre chunk size: 10712090624
local chunk size: 285599461
local pre chunk size: 5898720256
Compute SF times:202071
Sum Time5: 131 seconds
Fetch Base Chunk Time: 818 seconds
load container times: 289121
cache hit times: 6875110
Read IO time: 312 seconds
Write IO time: 2 seconds
Update Cache time: 62seconds
Read Cache time: 509seconds
```

  

```SQL
start LocalDedupSim
process file: /mnt/dataset2/LKT//v2.6.11.tar
logicalchunkSize is 208250880
uniquechunkSize is 90389430
Overall Compression Ratio: 2.30393
bug num is 0
error Count 0
same count is 10396
DedupReductSize is 249344
DeltaReductSize is 9309894
LocalReductSize is 108302212
ReductSum is 117861450
Header -> Header + Data is 0
process last container
process file: /mnt/dataset2/LKT//v2.6.12.tar
logicalchunkSize is 420976640
uniquechunkSize is 98171561
Overall Compression Ratio: 4.28817
bug num is 0
error Count 0
same count is 15213
DedupReductSize is 102479872
DeltaReductSize is 104678683
LocalReductSize is 115646524
ReductSum is 322805079
Header -> Header + Data is 3012
process last container
process file: /mnt/dataset2/LKT//v2.6.13.tar
logicalchunkSize is 640409600
uniquechunkSize is 108334663
Overall Compression Ratio: 5.9114
bug num is 0
error Count 0
same count is 21304
DedupReductSize is 213596160
DeltaReductSize is 192220441
LocalReductSize is 126258336
ReductSum is 532074937
Header -> Header + Data is 6147
process last container
process file: /mnt/dataset2/LKT//v2.6.14.tar
logicalchunkSize is 864501760
uniquechunkSize is 118528593
Overall Compression Ratio: 7.29361
bug num is 0
error Count 0
same count is 27430
DedupReductSize is 335881728
DeltaReductSize is 274352147
LocalReductSize is 135739292
ReductSum is 745973167
Header -> Header + Data is 9359
process last container
process file: /mnt/dataset2/LKT//v2.6.15.tar
logicalchunkSize is 1092659200
uniquechunkSize is 131307479
Overall Compression Ratio: 8.32138
bug num is 0
error Count 0
same count is 32900
DedupReductSize is 447205888
DeltaReductSize is 366206115
LocalReductSize is 147939718
ReductSum is 961351721
Header -> Header + Data is 13037
process last container
process file: /mnt/dataset2/LKT//v2.6.16.tar
logicalchunkSize is 1326612480
uniquechunkSize is 144365554
Overall Compression Ratio: 9.18926
bug num is 0
error Count 0
same count is 39078
DedupReductSize is 553494016
DeltaReductSize is 469179907
LocalReductSize is 159573003
ReductSum is 1182246926
Header -> Header + Data is 17301
process last container
process file: /mnt/dataset2/LKT//v2.6.17.tar
logicalchunkSize is 1563217920
uniquechunkSize is 157613148
Overall Compression Ratio: 9.91807
bug num is 0
error Count 0
same count is 45527
DedupReductSize is 664289280
DeltaReductSize is 569580407
LocalReductSize is 171735085
ReductSum is 1405604772
Header -> Header + Data is 21270
process last container
process file: /mnt/dataset2/LKT//v2.6.18.tar
logicalchunkSize is 1803356160
uniquechunkSize is 172300971
Overall Compression Ratio: 10.4663
bug num is 0
error Count 0
same count is 52015
DedupReductSize is 747172864
DeltaReductSize is 699787021
LocalReductSize is 184095304
ReductSum is 1631055189
Header -> Header + Data is 27149
process last container
process file: /mnt/dataset2/LKT//v2.6.19.tar
logicalchunkSize is 2049822720
uniquechunkSize is 187985159
Overall Compression Ratio: 10.9042
bug num is 0
error Count 0
same count is 57322
DedupReductSize is 842907136
DeltaReductSize is 821126593
LocalReductSize is 197803832
ReductSum is 1861837561
Header -> Header + Data is 32287
process last container
process file: /mnt/dataset2/LKT//v2.6.20.tar
logicalchunkSize is 2300139520
uniquechunkSize is 199588053
Overall Compression Ratio: 11.5244
bug num is 0
error Count 0
same count is 62524
DedupReductSize is 968765440
DeltaReductSize is 924336164
LocalReductSize is 207449863
ReductSum is 2100551467
Header -> Header + Data is 36029
process last container
process file: /mnt/dataset2/LKT//v2.6.21.tar
logicalchunkSize is 2554542080
uniquechunkSize is 212275867
Overall Compression Ratio: 12.0341
bug num is 0
error Count 0
same count is 68989
DedupReductSize is 1092766720
DeltaReductSize is 1031468854
LocalReductSize is 218030639
ReductSum is 2342266213
Header -> Header + Data is 40326
process last container
process file: /mnt/dataset2/LKT//v2.6.22.tar
logicalchunkSize is 2817464320
uniquechunkSize is 228517538
Overall Compression Ratio: 12.3293
bug num is 0
error Count 0
same count is 75881
DedupReductSize is 1215760384
DeltaReductSize is 1140541186
LocalReductSize is 232645212
ReductSum is 2588946782
Header -> Header + Data is 45299
process last container
process file: /mnt/dataset2/LKT//v2.6.23.tar
logicalchunkSize is 3082168320
uniquechunkSize is 244494126
Overall Compression Ratio: 12.6063
bug num is 0
error Count 0
same count is 82151
DedupReductSize is 1347535360
DeltaReductSize is 1243549826
LocalReductSize is 246589008
ReductSum is 2837674194
Header -> Header + Data is 49873
process last container
process file: /mnt/dataset2/LKT//v2.6.24.tar
logicalchunkSize is 3355002880
uniquechunkSize is 265665985
Overall Compression Ratio: 12.6287
bug num is 0
error Count 0
same count is 89244
DedupReductSize is 1450529280
DeltaReductSize is 1372926389
LocalReductSize is 265881226
ReductSum is 3089336895
Header -> Header + Data is 55766
process last container
process file: /mnt/dataset2/LKT//v2.6.25.tar
logicalchunkSize is 3639654400
uniquechunkSize is 289132868
Overall Compression Ratio: 12.5882
bug num is 0
error Count 0
same count is 96759
DedupReductSize is 1565598720
DeltaReductSize is 1497556306
LocalReductSize is 287366506
ReductSum is 3350521532
Header -> Header + Data is 62147
process last container
process file: /mnt/dataset2/LKT//v2.6.26.tar
logicalchunkSize is 3929231360
uniquechunkSize is 308516096
Overall Compression Ratio: 12.7359
bug num is 0
error Count 0
same count is 104172
DedupReductSize is 1693399040
DeltaReductSize is 1622537825
LocalReductSize is 304778399
ReductSum is 3620715264
Header -> Header + Data is 67860
process last container
process file: /mnt/dataset2/LKT//v2.6.27.tar
logicalchunkSize is 4223057920
uniquechunkSize is 331934490
Overall Compression Ratio: 12.7226
bug num is 0
error Count 0
same count is 111071
DedupReductSize is 1812239872
DeltaReductSize is 1753292581
LocalReductSize is 325590977
ReductSum is 3891123430
Header -> Header + Data is 74649
process last container
process file: /mnt/dataset2/LKT//v2.6.28.tar
logicalchunkSize is 4533319680
uniquechunkSize is 353639016
Overall Compression Ratio: 12.8191
bug num is 0
error Count 0
same count is 118120
DedupReductSize is 1958783488
DeltaReductSize is 1873532788
LocalReductSize is 347364388
ReductSum is 4179680664
Header -> Header + Data is 80330
process last container
process file: /mnt/dataset2/LKT//v2.6.29.tar
logicalchunkSize is 4869498880
uniquechunkSize is 380721300
Overall Compression Ratio: 12.7902
bug num is 0
error Count 0
same count is 125611
DedupReductSize is 2102685696
DeltaReductSize is 2011373769
LocalReductSize is 374718115
ReductSum is 4488777580
Header -> Header + Data is 87080
process last container
process file: /mnt/dataset2/LKT//v2.6.30.tar
logicalchunkSize is 5222645760
uniquechunkSize is 407501327
Overall Compression Ratio: 12.8163
bug num is 0
error Count 0
same count is 133977
DedupReductSize is 2258367488
DeltaReductSize is 2156826095
LocalReductSize is 399950850
ReductSum is 4815144433
Header -> Header + Data is 93504
process last container
process file: /mnt/dataset2/LKT//v2.6.31.tar
logicalchunkSize is 5588357120
uniquechunkSize is 432276327
Overall Compression Ratio: 12.9277
bug num is 0
error Count 0
same count is 142929
DedupReductSize is 2438954496
DeltaReductSize is 2293325949
LocalReductSize is 423800348
ReductSum is 5156080793
Header -> Header + Data is 99651
process last container
process file: /mnt/dataset2/LKT//v2.6.32.tar
logicalchunkSize is 5970749440
uniquechunkSize is 460921074
Overall Compression Ratio: 12.954
bug num is 0
error Count 0
same count is 152386
DedupReductSize is 2612546560
DeltaReductSize is 2445520380
LocalReductSize is 451761426
ReductSum is 5509828366
Header -> Header + Data is 106583
process last container
process file: /mnt/dataset2/LKT//v2.6.33.tar
logicalchunkSize is 6365849600
uniquechunkSize is 486961445
Overall Compression Ratio: 13.0726
bug num is 0
error Count 0
same count is 161043
DedupReductSize is 2796205056
DeltaReductSize is 2606858867
LocalReductSize is 475824232
ReductSum is 5878888155
Header -> Header + Data is 113428
process last container
process file: /mnt/dataset2/LKT//v2.6.34.tar
logicalchunkSize is 6770524160
uniquechunkSize is 509981127
Overall Compression Ratio: 13.276
bug num is 0
error Count 0
same count is 169740
DedupReductSize is 2964165632
DeltaReductSize is 2801605374
LocalReductSize is 494772027
ReductSum is 6260543033
Header -> Header + Data is 121437
process last container
process file: /mnt/dataset2/LKT//v2.6.35.tar
logicalchunkSize is 7183421440
uniquechunkSize is 532910238
Overall Compression Ratio: 13.4796
bug num is 0
error Count 0
same count is 178612
DedupReductSize is 3176586240
DeltaReductSize is 2957865857
LocalReductSize is 516059105
ReductSum is 6650511202
Header -> Header + Data is 127810
process last container
process file: /mnt/dataset2/LKT//v2.6.36.tar
logicalchunkSize is 7597076480
uniquechunkSize is 554472497
Overall Compression Ratio: 13.7014
bug num is 0
error Count 0
same count is 188719
DedupReductSize is 3394735104
DeltaReductSize is 3113572528
LocalReductSize is 534296351
ReductSum is 7042603983
Header -> Header + Data is 134307
process last container
process file: /mnt/dataset2/LKT//v2.6.37.tar
logicalchunkSize is 8028426240
uniquechunkSize is 584882949
Overall Compression Ratio: 13.7266
bug num is 0
error Count 0
same count is 196205
DedupReductSize is 3594672128
DeltaReductSize is 3284234339
LocalReductSize is 564636824
ReductSum is 7443543291
Header -> Header + Data is 140916
process last container
process file: /mnt/dataset2/LKT//v2.6.38.tar
logicalchunkSize is 8468920320
uniquechunkSize is 606855826
Overall Compression Ratio: 13.9554
bug num is 0
error Count 0
same count is 206016
DedupReductSize is 3836740096
DeltaReductSize is 3442377680
LocalReductSize is 582946718
ReductSum is 7862064494
Header -> Header + Data is 147200
process last container
process file: /mnt/dataset2/LKT//v2.6.39.tar
logicalchunkSize is 8918517760
uniquechunkSize is 631755280
Overall Compression Ratio: 14.117
bug num is 0
error Count 0
same count is 216655
DedupReductSize is 4048455680
DeltaReductSize is 3633879699
LocalReductSize is 604427101
ReductSum is 8286762480
Header -> Header + Data is 154799
process last container
process file: /mnt/dataset2/LKT//v3.0.tar
logicalchunkSize is 9369497600
uniquechunkSize is 655614253
Overall Compression Ratio: 14.2912
bug num is 0
error Count 0
same count is 223180
DedupReductSize is 4314573312
DeltaReductSize is 3773270596
LocalReductSize is 626039439
ReductSum is 8713883347
Header -> Header + Data is 160405
process last container
process file: /mnt/dataset2/LKT//v3.1.tar
logicalchunkSize is 9823969280
uniquechunkSize is 678685545
Overall Compression Ratio: 14.475
bug num is 0
error Count 0
same count is 234149
DedupReductSize is 4574633984
DeltaReductSize is 3922267047
LocalReductSize is 648382704
ReductSum is 9145283735
Header -> Header + Data is 166555
process last container
process file: /mnt/dataset2/LKT//v3.2.tar
logicalchunkSize is 10284881920
uniquechunkSize is 704138716
Overall Compression Ratio: 14.6063
bug num is 0
error Count 0
same count is 244256
DedupReductSize is 4809396736
DeltaReductSize is 4099055321
LocalReductSize is 672291147
ReductSum is 9580743204
Header -> Header + Data is 174327
process last container
process file: /mnt/dataset2/LKT//v3.3.tar
logicalchunkSize is 10750965760
uniquechunkSize is 725917747
Overall Compression Ratio: 14.8102
bug num is 0
error Count 0
same count is 250747
DedupReductSize is 5053116928
DeltaReductSize is 4281431645
LocalReductSize is 690499440
ReductSum is 10025048013
Header -> Header + Data is 181826
process last container
process file: /mnt/dataset2/LKT//v3.4.tar
logicalchunkSize is 11223531520
uniquechunkSize is 750175055
Overall Compression Ratio: 14.9612
bug num is 0
error Count 0
same count is 260729
DedupReductSize is 5293777408
DeltaReductSize is 4468116027
LocalReductSize is 711463030
ReductSum is 10473356465
Header -> Header + Data is 189841
process last container
process file: /mnt/dataset2/LKT//v3.5.tar
logicalchunkSize is 11703255040
uniquechunkSize is 773172061
Overall Compression Ratio: 15.1367
bug num is 0
error Count 0
same count is 270257
DedupReductSize is 5564561920
DeltaReductSize is 4633291558
LocalReductSize is 732229501
ReductSum is 10930082979
Header -> Header + Data is 196512
process last container
process file: /mnt/dataset2/LKT//v3.6.tar
logicalchunkSize is 12192460800
uniquechunkSize is 794078738
Overall Compression Ratio: 15.3542
bug num is 0
error Count 0
same count is 280901
DedupReductSize is 5855179776
DeltaReductSize is 4791893986
LocalReductSize is 751308300
ReductSum is 11398382062
Header -> Header + Data is 202632
process last container
process file: /mnt/dataset2/LKT//v3.7.tar
logicalchunkSize is 12691486720
uniquechunkSize is 819892817
Overall Compression Ratio: 15.4794
bug num is 0
error Count 0
same count is 293302
DedupReductSize is 6118290944
DeltaReductSize is 4979482895
LocalReductSize is 773820064
ReductSum is 11871593903
Header -> Header + Data is 211101
process last container
process file: /mnt/dataset2/LKT//v3.8.tar
logicalchunkSize is 13197148160
uniquechunkSize is 844533556
Overall Compression Ratio: 15.6266
bug num is 0
error Count 0
same count is 306036
DedupReductSize is 6381117952
DeltaReductSize is 5176670903
LocalReductSize is 794825749
ReductSum is 12352614604
Header -> Header + Data is 219203
process last container
process file: /mnt/dataset2/LKT//v3.9.tar
logicalchunkSize is 13710981120
uniquechunkSize is 868952790
Overall Compression Ratio: 15.7787
bug num is 0
error Count 0
same count is 317625
DedupReductSize is 6663668224
DeltaReductSize is 5363213885
LocalReductSize is 815146221
ReductSum is 12842028330
Header -> Header + Data is 227304
process last container
process file: /mnt/dataset2/LKT//v3.10.tar
logicalchunkSize is 14232545280
uniquechunkSize is 897659067
Overall Compression Ratio: 15.8552
bug num is 0
error Count 0
same count is 330856
DedupReductSize is 6950151680
DeltaReductSize is 5542109717
LocalReductSize is 842624816
ReductSum is 13334886213
Header -> Header + Data is 235003
process last container
process file: /mnt/dataset2/LKT//v3.11.tar
logicalchunkSize is 14766673920
uniquechunkSize is 924327896
Overall Compression Ratio: 15.9756
bug num is 0
error Count 0
same count is 337767
DedupReductSize is 7262859264
DeltaReductSize is 5711793052
LocalReductSize is 867693708
ReductSum is 13842346024
Header -> Header + Data is 242095
process last container
process file: /mnt/dataset2/LKT//v3.12.tar
logicalchunkSize is 15310643200
uniquechunkSize is 947763524
Overall Compression Ratio: 16.1545
bug num is 0
error Count 0
same count is 350653
DedupReductSize is 7596351488
DeltaReductSize is 5877911325
LocalReductSize is 888616863
ReductSum is 14362879676
Header -> Header + Data is 248563
process last container
process file: /mnt/dataset2/LKT//v3.13.tar
logicalchunkSize is 15860459520
uniquechunkSize is 970230462
Overall Compression Ratio: 16.3471
bug num is 0
error Count 0
same count is 364211
DedupReductSize is 7916908032
DeltaReductSize is 6066551931
LocalReductSize is 906769095
ReductSum is 14890229058
Header -> Header + Data is 255758
process last container
process file: /mnt/dataset2/LKT//v3.14.tar
logicalchunkSize is 16420515840
uniquechunkSize is 993774761
Overall Compression Ratio: 16.5234
bug num is 0
error Count 0
same count is 378021
DedupReductSize is 8232019968
DeltaReductSize is 6268309119
LocalReductSize is 926411992
ReductSum is 15426741079
Header -> Header + Data is 263606
process last container
process file: /mnt/dataset2/LKT//v3.15.tar
logicalchunkSize is 16992030720
uniquechunkSize is 1019417155
Overall Compression Ratio: 16.6684
bug num is 0
error Count 0
same count is 392086
DedupReductSize is 8554925568
DeltaReductSize is 6469042912
LocalReductSize is 948645085
ReductSum is 15972613565
Header -> Header + Data is 271374
process last container
process file: /mnt/dataset2/LKT//v3.16.tar
logicalchunkSize is 17570693120
uniquechunkSize is 1043824640
Overall Compression Ratio: 16.833
bug num is 0
error Count 0
same count is 401830
DedupReductSize is 8900872192
DeltaReductSize is 6656582539
LocalReductSize is 969413749
ReductSum is 16526868480
Header -> Header + Data is 279010
process last container
process file: /mnt/dataset2/LKT//v3.17.tar
logicalchunkSize is 18147297280
uniquechunkSize is 1067803296
Overall Compression Ratio: 16.995
bug num is 0
error Count 0
same count is 412867
DedupReductSize is 9235131904
DeltaReductSize is 6855025023
LocalReductSize is 989337057
ReductSum is 17079493984
Header -> Header + Data is 286317
process last container
process file: /mnt/dataset2/LKT//v3.18.tar
logicalchunkSize is 18727720960
uniquechunkSize is 1091195532
Overall Compression Ratio: 17.1626
bug num is 0
error Count 0
same count is 426149
DedupReductSize is 9587365888
DeltaReductSize is 7041001827
LocalReductSize is 1008157713
ReductSum is 17636525428
Header -> Header + Data is 293277
process last container
process file: /mnt/dataset2/LKT//v3.19.tar
logicalchunkSize is 19312179200
uniquechunkSize is 1115495721
Overall Compression Ratio: 17.3126
bug num is 0
error Count 0
same count is 440458
DedupReductSize is 9920158208
DeltaReductSize is 7249209652
LocalReductSize is 1027315619
ReductSum is 18196683479
Header -> Header + Data is 301450
process last container
process file: /mnt/dataset2/LKT//v4.0.tar
logicalchunkSize is 19902177280
uniquechunkSize is 1138032028
Overall Compression Ratio: 17.4882
bug num is 0
error Count 0
same count is 453529
DedupReductSize is 10292353536
DeltaReductSize is 7426217182
LocalReductSize is 1045574534
ReductSum is 18764145252
Header -> Header + Data is 308290
process last container
process file: /mnt/dataset2/LKT//v4.1.tar
logicalchunkSize is 20498104320
uniquechunkSize is 1162444422
Overall Compression Ratio: 17.6336
bug num is 0
error Count 0
same count is 463700
DedupReductSize is 10650847232
DeltaReductSize is 7619551802
LocalReductSize is 1065260864
ReductSum is 19335659898
Header -> Header + Data is 315876
process last container
process file: /mnt/dataset2/LKT//v4.2.tar
logicalchunkSize is 21129062400
uniquechunkSize is 1193675223
Overall Compression Ratio: 17.7008
bug num is 0
error Count 0
same count is 477885
DedupReductSize is 11009161216
DeltaReductSize is 7826290172
LocalReductSize is 1099935789
ReductSum is 19935387177
Header -> Header + Data is 324047
process last container
process file: /mnt/dataset2/LKT//v4.3.tar
logicalchunkSize is 21769902080
uniquechunkSize is 1219731993
Overall Compression Ratio: 17.8481
bug num is 0
error Count 0
same count is 492094
DedupReductSize is 11415711744
DeltaReductSize is 8012339149
LocalReductSize is 1122119194
ReductSum is 20550170087
Header -> Header + Data is 331785
process last container
process file: /mnt/dataset2/LKT//v4.4.tar
logicalchunkSize is 22418257920
uniquechunkSize is 1244741471
Overall Compression Ratio: 18.0104
bug num is 0
error Count 0
same count is 507225
DedupReductSize is 11821192704
DeltaReductSize is 8210103050
LocalReductSize is 1142220695
ReductSum is 21173516449
Header -> Header + Data is 339280
process last container
process file: /mnt/dataset2/LKT//v4.5.tar
logicalchunkSize is 23076311040
uniquechunkSize is 1269999815
Overall Compression Ratio: 18.1703
bug num is 0
error Count 0
same count is 520547
DedupReductSize is 12232564224
DeltaReductSize is 8410638883
LocalReductSize is 1163108118
ReductSum is 21806311225
Header -> Header + Data is 347091
process last container
process file: /mnt/dataset2/LKT//v4.6.tar
logicalchunkSize is 23742515200
uniquechunkSize is 1296375151
Overall Compression Ratio: 18.3145
bug num is 0
error Count 0
same count is 535336
DedupReductSize is 12646115328
DeltaReductSize is 8616160192
LocalReductSize is 1183864529
ReductSum is 22446140049
Header -> Header + Data is 354865
process last container
process file: /mnt/dataset2/LKT//v4.7.tar
logicalchunkSize is 24419491840
uniquechunkSize is 1322407986
Overall Compression Ratio: 18.4659
bug num is 0
error Count 0
same count is 549962
DedupReductSize is 13063614976
DeltaReductSize is 8827406801
LocalReductSize is 1206062077
ReductSum is 23097083854
Header -> Header + Data is 362550
process last container
process file: /mnt/dataset2/LKT//v4.8.tar
logicalchunkSize is 25106462720
uniquechunkSize is 1351267382
Overall Compression Ratio: 18.5799
bug num is 0
error Count 0
same count is 566169
DedupReductSize is 13493941248
DeltaReductSize is 9032206995
LocalReductSize is 1229047095
ReductSum is 23755195338
Header -> Header + Data is 371143
process last container
process file: /mnt/dataset2/LKT//v4.9.tar
logicalchunkSize is 25802045440
uniquechunkSize is 1380478962
Overall Compression Ratio: 18.6906
bug num is 0
error Count 0
same count is 582029
DedupReductSize is 13925127680
DeltaReductSize is 9243221278
LocalReductSize is 1253217520
ReductSum is 24421566478
Header -> Header + Data is 379629
process last container
process file: /mnt/dataset2/LKT//v4.10.tar
logicalchunkSize is 26515148800
uniquechunkSize is 1414061080
Overall Compression Ratio: 18.7511
bug num is 0
error Count 0
same count is 598951
DedupReductSize is 14337565696
DeltaReductSize is 9478716233
LocalReductSize is 1284805791
ReductSum is 25101087720
Header -> Header + Data is 388692
process last container
process file: /mnt/dataset2/LKT//v4.11.tar
logicalchunkSize is 27237427200
uniquechunkSize is 1445080113
Overall Compression Ratio: 18.8484
bug num is 0
error Count 0
same count is 615213
DedupReductSize is 14743245312
DeltaReductSize is 9738960314
LocalReductSize is 1310141461
ReductSum is 25792347087
Header -> Header + Data is 398635
process last container
process file: /mnt/dataset2/LKT//v4.12.tar
logicalchunkSize is 28017162240
uniquechunkSize is 1484303764
Overall Compression Ratio: 18.8756
bug num is 0
error Count 0
same count is 631366
DedupReductSize is 15195462144
DeltaReductSize is 9982704399
LocalReductSize is 1354691933
ReductSum is 26532858476
Header -> Header + Data is 408193
process last container
process file: /mnt/dataset2/LKT//v4.13.tar
logicalchunkSize is 28835194880
uniquechunkSize is 1516399588
Overall Compression Ratio: 19.0156
bug num is 0
error Count 0
same count is 646746
DedupReductSize is 15701221696
DeltaReductSize is 10228697284
LocalReductSize is 1388876312
ReductSum is 27318795292
Header -> Header + Data is 416653
process last container
process file: /mnt/dataset2/LKT//v4.14.tar
logicalchunkSize is 29660252160
uniquechunkSize is 1549237398
Overall Compression Ratio: 19.1451
bug num is 0
error Count 0
same count is 663567
DedupReductSize is 16176810816
DeltaReductSize is 10519294831
LocalReductSize is 1414909115
ReductSum is 28111014762
Header -> Header + Data is 433191
process last container
process file: /mnt/dataset2/LKT//v4.15.tar
logicalchunkSize is 30494607360
uniquechunkSize is 1580343846
Overall Compression Ratio: 19.2962
bug num is 0
error Count 0
same count is 673638
DedupReductSize is 16679519148
DeltaReductSize is 10795205861
LocalReductSize is 1439538505
ReductSum is 28914263514
Header -> Header + Data is 443554
process last container
process file: /mnt/dataset2/LKT//v4.16.tar
logicalchunkSize is 31330549760
uniquechunkSize is 1611109587
Overall Compression Ratio: 19.4466
bug num is 0
error Count 0
same count is 690166
DedupReductSize is 17206265772
DeltaReductSize is 11048721385
LocalReductSize is 1464453016
ReductSum is 29719440173
Header -> Header + Data is 452881
process last container
process file: /mnt/dataset2/LKT//v4.17.tar
logicalchunkSize is 32164362240
uniquechunkSize is 1641809478
Overall Compression Ratio: 19.5908
bug num is 0
error Count 0
same count is 705884
DedupReductSize is 17733656451
DeltaReductSize is 11300862240
LocalReductSize is 1488034071
ReductSum is 30522552762
Header -> Header + Data is 462073
process last container
process file: /mnt/dataset2/LKT//v4.18.tar
logicalchunkSize is 32994293760
uniquechunkSize is 1670724793
Overall Compression Ratio: 19.7485
bug num is 0
error Count 0
same count is 723129
DedupReductSize is 18250607366
DeltaReductSize is 11563256050
LocalReductSize is 1509705551
ReductSum is 31323568967
Header -> Header + Data is 471102
process last container
process file: /mnt/dataset2/LKT//v4.19.tar
logicalchunkSize is 33833758720
uniquechunkSize is 1701549225
Overall Compression Ratio: 19.8841
bug num is 0
error Count 0
same count is 739471
DedupReductSize is 18785955590
DeltaReductSize is 11811810002
LocalReductSize is 1534443903
ReductSum is 32132209495
Header -> Header + Data is 480327
process last container
process file: /mnt/dataset2/LKT//v4.20.tar
logicalchunkSize is 34688532480
uniquechunkSize is 1732532900
Overall Compression Ratio: 20.0219
bug num is 0
error Count 0
same count is 757068
DedupReductSize is 19329855360
DeltaReductSize is 12065995574
LocalReductSize is 1560148646
ReductSum is 32955999580
Header -> Header + Data is 489256
process last container
process file: /mnt/dataset2/LKT//v5.0.tar
logicalchunkSize is 35551836160
uniquechunkSize is 1763163292
Overall Compression Ratio: 20.1637
bug num is 0
error Count 0
same count is 774365
DedupReductSize is 19894016896
DeltaReductSize is 12308515778
LocalReductSize is 1586140194
ReductSum is 33788672868
Header -> Header + Data is 498469
process last container
process file: /mnt/dataset2/LKT//v5.1.tar
logicalchunkSize is 36423495680
uniquechunkSize is 1792878969
Overall Compression Ratio: 20.3156
bug num is 0
error Count 0
same count is 791902
DedupReductSize is 20456458168
DeltaReductSize is 12563285860
LocalReductSize is 1610872683
ReductSum is 34630616711
Header -> Header + Data is 507614
process last container
process file: /mnt/dataset2/LKT//v5.2.tar
logicalchunkSize is 37294725120
uniquechunkSize is 1844814020
Overall Compression Ratio: 20.216
bug num is 0
error Count 0
same count is 811055
DedupReductSize is 20837205944
DeltaReductSize is 12958461409
LocalReductSize is 1654243747
ReductSum is 35449911100
Header -> Header + Data is 529815
process last container
process file: /mnt/dataset2/LKT//v5.3.tar
logicalchunkSize is 38208061440
uniquechunkSize is 1879782439
Overall Compression Ratio: 20.3258
bug num is 0
error Count 0
same count is 830830
DedupReductSize is 21409601772
DeltaReductSize is 13227573654
LocalReductSize is 1691103575
ReductSum is 36328279001
Header -> Header + Data is 539463
process last container
process file: /mnt/dataset2/LKT//v5.4.tar
logicalchunkSize is 39146199040
uniquechunkSize is 1911419725
Overall Compression Ratio: 20.4802
bug num is 0
error Count 0
same count is 845852
DedupReductSize is 22022748003
DeltaReductSize is 13493353463
LocalReductSize is 1718677849
ReductSum is 37234779315
Header -> Header + Data is 548501
process last container
process file: /mnt/dataset2/LKT//v5.5.tar
logicalchunkSize is 40093890560
uniquechunkSize is 1941996109
Overall Compression Ratio: 20.6457
bug num is 0
error Count 0
same count is 865517
DedupReductSize is 22656767014
DeltaReductSize is 13752173446
LocalReductSize is 1742953991
ReductSum is 38151894451
Header -> Header + Data is 557154
process last container
process file: /mnt/dataset2/LKT//v5.6.tar
logicalchunkSize is 41051504640
uniquechunkSize is 1971431858
Overall Compression Ratio: 20.8232
bug num is 0
error Count 0
same count is 884251
DedupReductSize is 23298778638
DeltaReductSize is 14016035107
LocalReductSize is 1765259037
ReductSum is 39080072782
Header -> Header + Data is 565777
process last container
process file: /mnt/dataset2/LKT//v5.7.tar
logicalchunkSize is 42017280000
uniquechunkSize is 2000539624
Overall Compression Ratio: 21.003
bug num is 0
error Count 0
same count is 904480
DedupReductSize is 23970599950
DeltaReductSize is 14258873232
LocalReductSize is 1787267194
ReductSum is 40016740376
Header -> Header + Data is 574148
process last container
process file: /mnt/dataset2/LKT//v5.8.tar
logicalchunkSize is 43001159680
uniquechunkSize is 2034911982
Overall Compression Ratio: 21.1317
bug num is 0
error Count 0
same count is 923067
DedupReductSize is 24615975542
DeltaReductSize is 14535532505
LocalReductSize is 1814739651
ReductSum is 40966247698
Header -> Header + Data is 585452
process last container
process file: /mnt/dataset2/LKT//v5.9.tar
logicalchunkSize is 44012175360
uniquechunkSize is 2078866774
Overall Compression Ratio: 21.1712
bug num is 0
error Count 0
same count is 925624
DedupReductSize is 25216638898
DeltaReductSize is 14857060375
LocalReductSize is 1859609313
ReductSum is 41933308586
Header -> Header + Data is 594381
process last container
process file: /mnt/dataset2/LKT//v5.10.tar
logicalchunkSize is 45031413760
uniquechunkSize is 2114329653
Overall Compression Ratio: 21.2982
bug num is 0
error Count 0
same count is 931019
DedupReductSize is 25874937836
DeltaReductSize is 15152118167
LocalReductSize is 1890028104
ReductSum is 42917084107
Header -> Header + Data is 602438
process last container
process file: /mnt/dataset2/LKT//v5.11.tar
logicalchunkSize is 46095626240
uniquechunkSize is 2147940256
Overall Compression Ratio: 21.4604
bug num is 0
error Count 0
same count is 938852
DedupReductSize is 26587592423
DeltaReductSize is 15437471594
LocalReductSize is 1922621967
ReductSum is 43947685984
Header -> Header + Data is 609805
process last container
process file: /mnt/dataset2/LKT//v5.12.tar
logicalchunkSize is 47165941760
uniquechunkSize is 2177127011
Overall Compression Ratio: 21.6643
bug num is 0
error Count 0
same count is 948329
DedupReductSize is 27340531431
DeltaReductSize is 15702370390
LocalReductSize is 1945912928
ReductSum is 44988814749
Header -> Header + Data is 616609
process last container
process file: /mnt/dataset2/LKT//v5.13.tar
logicalchunkSize is 48257720320
uniquechunkSize is 2211892692
Overall Compression Ratio: 21.8174
bug num is 0
error Count 0
same count is 959509
DedupReductSize is 28064192814
DeltaReductSize is 16007976671
LocalReductSize is 1973658143
ReductSum is 46045827628
Header -> Header + Data is 623909
process last container
Time taken by for loop: 49.3454 minutes
-----------------CHUNK NUM-----------------------
logical chunk num: 7851310
unique chunk num: 4833889
base chunk num: 1101198
delta chunk num: 3732691
finesse hit:2431897
fake data:0
-----------------CHUNK SIZE-----------------------
Overall Compression Ratio: 21.8174
logical chunk size: 48257720320
unique chunk size: 2211892692
dedup chunk size: 0
base chunk size: 1403069886
delta chunk size: 808822806
finesse chunk size: 514304565
finesse pre chunk size: 10684438816
local chunk size: 281669362
local pre chunk size: 5859013939
Compute SF times:109565
Sum Time5: 236 seconds
Fetch Base Chunk Time: 1656 seconds
load container times: 287749
cache hit times: 6552677
Read IO time: 362 seconds
Write IO time: 3 seconds
Update Cache time: 90seconds
Read Cache time: 1303seconds
```

  

## 设seg超过1B时就断时，TarSeg可以用旧版本的restore恢复

![](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGRjYmY2M2UyMjEwZjg0YjJkOTVjYjhjNDkzMDAzYzFfenV4bXpZd1FqTGNLdE85Q0RzS2EwYndzOG43cjNNcmJfVG9rZW46Vm1LRmJZNUZVb0VCczV4MmRDZmNDWm50bk9kXzE3NDE0MzgxODk6MTc0MTQ0MTc4OV9WNA)

## 新的seg-restore 在16kb时 通过md5测试

![](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=NTI4M2RmYjRkNmM1M2RiOTNiNThkNjVhOTUyMTc0NzRfVVVmWnlrbTRoS2FwTGNnOVRWNnFJMHpBdXhrRUMzS21fVG9rZW46UjlrNGJob1c4b1BJMVh4VnppR2N0VkRCbldmXzE3NDE0MzgxODk6MTc0MTQ0MTc4OV9WNA)

但是在restore全量时会服务器炸内存，最后killed掉

![](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=MGU0MTdiMTMxYzliOTcyYTM2ODA1ZThiYjA2MTE5ZmJfYmYxUW1MbDQxTlN3bDEzSnhZazVjM3lQNkZhNEhBRGxfVG9rZW46T210QmJyb3Ywb0MzRWN4bjNsMWM0dzg0bnJlXzE3NDE0MzgxODk6MTc0MTQ0MTc4OV9WNA)

这些是restore完的部分，md5码是对的上的

![](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=MzUxYzRiNGRiZWVhZjE5MDEwMWQ0ODMzMzEwZWJhMDFfVmFTa0FxdXpuUTAzVGZKckVWMVdpSjRVS2xnNUIyREtfVG9rZW46SWcwR2JnMXNJb2QyV0Z4OFNQbmNYOGRLbkhHXzE3NDE0MzgxODk6MTc0MTQ0MTc4OV9WNA)

![](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=MWQzOWI1NjcyYjJiNTI1MDQ2NjE4YTYzN2M1OTU1MjFfSnZXdW9FSlRVbTc2THBScG9aU1lxRUNxNW9IVDNJa2FfVG9rZW46V2RlVGJ0cmJMb2VXcFN4MmJ2VGNTTlRkblJnXzE3NDE0MzgxODk6MTc0MTQ0MTc4OV9WNA)